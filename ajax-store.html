<!DOCTYPE html>
<html lang="en">
<head>
    <title>Online Store</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>
<!--<div class="page-wrapper d-flex justify-content-center">-->
<!--	<div class="container mx-0 d-flex flex-column gap-5">-->
<!--		<header>-->
<!--			<h1 class="text-center p-5">AJAX Store</h1>-->
<!--		</header>-->
<!--		<main class="d-flex flex-column">-->
<!--			<table id="products" class="table table-hover">-->
<!--				<thead class="table-dark">-->
<!--				<tr>-->
<!--					<th>Title</th>-->
<!--					<th>Quantity</th>-->
<!--					<th>Price</th>-->
<!--					<th>Categories</th>-->
<!--					<th></th>-->
<!--				</tr>-->
<!--				</thead>-->
<!--				<tbody id="insertProducts"></tbody>-->
<!--			</table><br>-->
<!--			<button id="refreshBtn" class="btn btn-primary align-self-center">Refresh</button>-->
<!--		</main>-->
<!--	</div>-->
<!--</div>-->


<form>
	<!--Title input-->
	<label for="title">Name of the Movie:
		<input id="title" name="title" type="text">
	</label>
	<!--description textarea-->
	<label for="summary">Give a brief summary.
		<textarea id="summary" name="summary" placeholder="Movie Summary"></textarea>
	</label>
	<!--year input-->
	<label>Select a year the movie was created
		<select id="ddlYears">
			<option>Select</option>
		</select>
	</label>
	<!--category select-->
	<label id="categories">Genre
		<input type="checkbox" class="categories" name="category[]" value="Action">Action
		<input type="checkbox" class="categories" name="category[]" value="Adventure">Adventure
		<input type="checkbox" class="categories" name="category[]" value="Animation">Animation
		<input type="checkbox" class="categories" name="category[]" value="Crime">Crime
		<input type="checkbox" class="categories" name="category[]" value="Documentary">Documentary
		<input type="checkbox" class="categories" name="category[]" value="Drama">Drama
		<input type="checkbox" class="categories" name="category[]" value="Family">Family
		<input type="checkbox" class="categories" name="category[]" value="Fantasy">Fantasy
		<input type="checkbox" class="categories" name="category[]" value="History">History
		<input type="checkbox" class="categories" name="category[]" value="Horror">Horror
		<input type="checkbox" class="categories" name="category[]" value="Music">Music
		<input type="checkbox" class="categories" name="category[]" value="Mystery">Mystery
		<input type="checkbox" class="categories" name="category[]" value="Romance">Romance
		<input type="checkbox" class="categories" name="category[]" value="Science Fiction">Science Fiction
		<input type="checkbox" class="categories" name="category[]" value="TV Movie">TV Movie
		<input type="checkbox" class="categories" name="category[]" value="Thriller">Thriller
		<input type="checkbox" class="categories" name="category[]" value="War">War
		<input type="checkbox" class="categories" name="category[]" value="Western">Western
	</label>
	<!--rating-->
	<label for="rating">Movie Rating
		<select id="rating">
			<option>Select</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
			<option>6</option>
			<option>7</option>
			<option>8</option>
			<option>9</option>
			<option>10</option>
		</select>
	</label>
	<button id="add-btn" type="button">Add</button>
</form>

<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
<script>
	// const refreshTableIfEmpty = async () => {
	// 	const tableBody = document.querySelector('#insertProducts');
	// 	const children = tableBody.querySelectorAll('tr');
	// 	if (children.length === 0 ) {
	// 		//todo: refresh the table
	// 		const tools = await getTools();
	// 		dataLoop(tools, tableBody);
	// 	}
	//
	// }
	// const getTools = async () => {
	// 	try {
	// 		const url = `./data/inventory.json`;
	// 		const options = {
	// 			"method": "GET",
	// 		}
	// 		const response = await fetch(url, options);
	// 		const data = await response.json();
	// 		return data;
	// 	} catch (error) {
	// 		console.log(error);
	// 	}
	// }
	//
	// const renderTool = (tool, target) => {
	// 		const tableRow = document.createElement('tr');
	// 		tableRow.innerHTML = `
	// 			<td>${tool.title}</td>
	//             <td>${tool.quantity}</td>
	//             <td>${tool.price}</td>
	//             <td>${tool.categories}</td>
	//             <td><button>delete</button></td>
	// 		`;
	// 		const deleteBtn = tableRow.querySelector('button');
	// 		deleteBtn.addEventListener('click', ()=>{
	// 			tableRow.remove();
	// 		})
	// 		target.appendChild(tableRow);
	// }
	//
	// const dataLoop = (data, target) => {
	// 	for (let tool of data) {
	// 		renderTool(tool, target);
	// 	}
	// }
	//
	//
	// (async () => {
	// 	const tools = await getTools();
	// 	const tableBody = document.querySelector('#insertProducts');
	// 	dataLoop(tools, tableBody)
	//
	// 	const refresh = document.querySelector('#refreshBtn');
	// 	refresh.addEventListener('click', refreshTableIfEmpty)
	// })();


	let movies = [
			{
				name: 'apksdnca',
				day: 326,
				summary: 'lsjdbcalkdbcljqabkslvcbalskbnck.a'
			},
		{
			name: 'admvnd ',
			day: 3,
			summary: 'adskcjkvbasjklv bas'
		},
		{
			name: 'apksdnca',
			day: 36,
			summary: 'lkdevndspiknvkld;v'
		}
		]

	let ddlYears = document.getElementById("ddlYears");
	let currentYear = (new Date()).getFullYear();

	for (let i = 1888; i <= currentYear; i++) {
		let option = document.createElement("OPTION");
		option.innerHTML = i;
		option.value = i;
		ddlYears.appendChild(option);
	}

	let submit = document.querySelector('#add-btn');
	submit.addEventListener('click', add)

	function add (e) {
		e.preventDefault();
		let title = document.querySelector("#title").value
		let summary = document.querySelector('#summary').value
		let year = document.querySelector("#ddlYears").value
		let categories = document.querySelector(".categories").checked
		let rating = document.querySelector("#rating").value
		let checkboxes = document.getElementsByName("category[]")
		let movie = {};
		let results = '';

		for (let i = 0; i < checkboxes.length; i++) {
			if (checkboxes[i].checked) {
				results += `${checkboxes[i].value} `
			}
		}

		movie.title = title
		movie.cover = "https://www.themoviedb.org/t/p/w188_and_h282_bestv2/dyhaB19AICF7TO7CK2aD6KfymnQ.jpg"
		movie.year = year
		movie.summary = summary;
		movie.categories = results
		movie.rating = rating

		console.log(movie);

		movies.push(movie);
		console.log(movies);

	}

</script>

</body>
</html>
